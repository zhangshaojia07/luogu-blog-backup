# [ABC281G] Farthest City（BFS树/计数DP）

看到距离限制，想到 BFS 树。

由于 $2,\dots,n-1$ 点之间无区分，可以 DP。

$f_{i,j}$ 表示 $2,\dots,n-1$ 中有 $i$ 个还没被选上，选上的中有 $j$ 个取到了目前最大距离（离 $1$ 号点）的方案数。

考虑转移，枚举下一层距离相同的点有 $k$ 个，则有：
$$
f_{i,j}\times\binom{i}{k}\times 2^{\binom{k}{2}}\times (2^j-1)^k\to f_{i-k,k}
$$
各项系数为：剩下选择 $k$ 个、内部连边、与上一层连边。

初始 $f_{n-2,1}=1$。

答案为
$$
\sum_{i=1}^{n-2} f_{0,i}\times (2^i-1)
$$
代码有必要放吗？